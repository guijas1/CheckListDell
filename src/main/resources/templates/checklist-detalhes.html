<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalhes do Checklist</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container my-5">
    <div class="card shadow-lg border-0">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h3 class="mb-0">üìù Detalhes do Checklist</h3>
            <a href="/checklists" class="btn btn-outline-light btn-sm">‚Æú Voltar</a>
        </div>
        <div class="card-body">

            <!-- Dados principais -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <strong>Modelo:</strong> <span th:text="${checklist.modelo}"></span><br>
                    <strong>Patrim√¥nio:</strong> <span th:text="${checklist.patrimonio}"></span><br>
                    <strong>Localiza√ß√£o:</strong> <span th:text="${checklist.localizacao != null ? checklist.localizacao : '‚Äî'}"></span><br>
                    <strong>Sa√∫de da Bateria:</strong> <span th:text="${checklist.bateria != null ? checklist.bateria : '‚Äî'}"></span><br>
                </div>
                <div class="col-md-6">
                    <strong>Service Tag:</strong> <span th:text="${checklist.serviceTag}"></span><br>
                    <strong>Data:</strong>
                    <span th:text="${checklist.dataCriacao != null ? checklist.dataCriacao.toString() : '‚Äî'}"></span>
                </div>
            </div>

            <hr>
            <h5 class="mb-3">‚úîÔ∏è Respostas do Checklist</h5>
            <ul class="list-group mb-4">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Liga normalmente
                    <span th:text="${checklist.liga ? 'Sim' : 'N√£o'}" class="fw-bold"></span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Tela apresenta imagem
                    <span th:text="${checklist.telaFunciona ? 'Sim' : 'N√£o'}" class="fw-bold"></span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Teclado funcionando
                    <span th:text="${checklist.tecladoFunciona ? 'Sim' : 'N√£o'}" class="fw-bold"></span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Wi-Fi conecta corretamente
                    <span th:text="${checklist.wifiFunciona ? 'Sim' : 'N√£o'}" class="fw-bold"></span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Carca√ßa sem avarias
                    <span th:text="${checklist.carcaca ? 'Sim' : 'N√£o'}" class="fw-bold"></span>
                </li>
                <!-- Novo item -->
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Sa√∫de da bateria
                    <span th:text="${checklist.bateria != null ? checklist.bateria : '‚Äî'}" class="fw-bold"></span>
                </li>
            </ul>

            <h5>üóíÔ∏è Observa√ß√µes</h5>
            <p th:text="${checklist.observacoes ?: 'Sem observa√ß√µes.'}" class="border rounded p-2 bg-white"></p>

            <h5>üìù Atualizar Dados</h5>
            <form th:action="@{'/checklists/' + ${checklist.id} + '/atualizar'}" method="post">
                <div class="mb-3">
                    <label for="chamado_otrs" class="form-label">Chamado OTRS</label>
                    <input type="text" id="chamado_otrs" name="chamado_otrs" th:value="${checklist.chamadoOTRS}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="origem_notebook" class="form-label">Origem do Notebook</label>
                    <input type="text" id="origem_notebook" name="origem_notebook" th:value="${checklist.historicoNotebook}" class="form-control">
                </div>
                <!-- ‚úÖ Campo de edi√ß√£o da Localiza√ß√£o -->
                <div class="mb-3">
                    <label for="localizacao" class="form-label">Localiza√ß√£o</label>
                    <input type="text" id="localizacao" name="localizacao" th:value="${checklist.localizacao}" class="form-control">
                </div>
                <!-- ‚úÖ Novo campo para editar Sa√∫de da Bateria -->
                <div class="mb-3">
                    <label for="bateria" class="form-label">Sa√∫de da Bateria</label>
                    <input type="text" id="bateria" name="bateria" th:value="${checklist.bateria}" class="form-control">
                </div>
                <button type="submit" class="btn btn-outline-success">Salvar Altera√ß√µes</button>
            </form>

            <h5 class="mt-4">üì∏ Fotos Anexadas</h5>
            <div th:if="${checklist.fotoPath != null and !checklist.fotoPath.isEmpty()}">
                <div class="d-flex flex-wrap gap-3 mt-2">
                    <div th:each="foto : ${checklist.fotoPath}">
                        <img th:src="${foto}" alt="Foto do checklist" class="img-thumbnail" style="max-width: 200px;">
                    </div>
                </div>
            </div>
            <div th:if="${checklist.fotoPath == null or checklist.fotoPath.isEmpty()}" class="text-muted mt-2">
                Nenhuma imagem foi anexada.
            </div>

            <div class="mt-4 d-flex justify-content-end gap-2">
                <a th:href="@{'/checklists/' + ${checklist.id} + '/exportar'}" class="btn btn-outline-primary">üìÑ Exportar PDF</a>
                <form th:action="@{'/checklists/' + ${checklist.id} + '/deletar'}" method="post"
                      onsubmit="return confirm('Tem certeza que deseja excluir este checklist?');">
                    <button type="submit" class="btn btn-outline-danger">üóëÔ∏è Excluir Checklist</button>
                </form>
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
